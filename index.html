<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spark & Nova ‚Äî Cat Care üêæ</title>
<style>
  :root{
    --bg:#FFF8FF; --panel:#fff; --muted:#7A6B8A;
    --accent:#FF9AC2; --accent2:#9AD9FF; --good:#9EE0A1; --bad:#FFB3B3;
    --radius:16px; --shadow:0 12px 30px rgba(122,107,138,0.08); --ui:system-ui,system-ui, -apple-system, 'Segoe UI', Roboto;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:var(--ui);background:linear-gradient(180deg,#FFF8FF,#FFFEF8);color:#2a2130;display:flex;align-items:center;justify-content:center;padding:18px}
  .wrap{width:100%;max-width:1100px}
  header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
  .logo{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;color:#fff;font-size:26px}
  h1{margin:0;font-size:20px}
  .app{display:grid;grid-template-columns:320px 1fr;gap:16px}
  .panel{background:var(--panel);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow)}
  .mini{font-size:13px;color:var(--muted)}

  /* left */
  .cats-list{display:flex;flex-direction:column;gap:8px}
  .cat-card{display:flex;align-items:center;gap:10px;padding:8px;border-radius:12px;cursor:pointer}
  .cat-card.active{box-shadow:0 8px 18px rgba(154,217,255,0.12);background:linear-gradient(90deg,#fff,#FFF7FF)}
  .cat-pic{width:64px;height:64px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:30px}

  /* right: main pet area */
  .stage{display:flex;gap:14px;align-items:flex-start}
  .pet-area{flex:1;display:flex;flex-direction:column;align-items:center;gap:8px}
  .pet-window{width:420px;height:360px;border-radius:14px;background:linear-gradient(180deg,#fff,#FFF7FF);display:flex;align-items:center;justify-content:center;position:relative;border:2px solid rgba(42,33,48,0.04)}
  .pet-emoji{font-size:96px}
  .bars{width:420px;display:flex;flex-direction:column;gap:8px}
  .bar{display:flex;align-items:center;gap:8px}
  .bar .label{width:80px;font-size:13px;color:var(--muted)}
  .bar .meter{flex:1;height:14px;border-radius:10px;background:#f1f1f6;position:relative}
  .bar .meter > i{position:absolute;left:0;top:0;bottom:0;border-radius:10px}

  .actions{display:flex;gap:8px;margin-top:8px}
  .btn{padding:10px 12px;border-radius:12px;border:0;cursor:pointer;font-weight:700}
  .btn-primary{background:linear-gradient(90deg,var(--accent),#FFD59A);color:#3a2330}
  .btn-ghost{background:transparent;border:1px dashed rgba(42,33,48,0.06)}

  .log{margin-top:8px;background:#fff;padding:8px;border-radius:10px;max-height:120px;overflow:auto}

  /* play minigame toy */
  .toy{position:absolute;width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer}
  .sparkles{position:absolute;left:12px;top:12px;font-size:20px;opacity:0.9}

  .footer{margin-top:10px;text-align:center;color:var(--muted)}

  @media (max-width:980px){.app{grid-template-columns:1fr}.pet-window{width:320px;height:300px}.bars{width:320px}}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">üêæ</div>
      <div>
        <h1>Cat Care ‚Äî take care of your cute kitties</h1>
        <div class="mini">Feed, play, groom, and collect toys. Saves automatically to your device.</div>
      </div>
    </header>

    <div class="app">
      <div class="panel">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div class="mini">Your Cats</div>
            <div style="font-weight:800">Tap a cat to choose</div>
          </div>
          <div>
            <button class="btn btn-primary" id="newCatBtn">+ New Cat</button>
          </div>
        </div>

        <div style="margin-top:12px" class="cats-list" id="catsList"></div>

        <hr style="margin:12px 0;border:none;border-top:1px solid rgba(42,33,48,0.04)">
        <div class="mini">Daily Streak: <strong id="dailyStreak">0</strong> days</div>
        <div class="mini">Last saved: <span id="lastSaved">‚Äî</span></div>
      </div>

      <div class="panel">
        <div class="stage">
          <div class="pet-area">
            <div class="pet-window" id="petWindow">
              <div class="pet-emoji" id="petEmoji">üò∫</div>
              <div class="toy" id="toy" style="display:none">üéæ</div>
              <div class="sparkles" id="sparkles">‚ú®</div>
            </div>

            <div class="bars">
              <div class="bar"><div class="label">Hunger</div><div class="meter" id="hungerMeter"><i style="width:50%;background:linear-gradient(90deg,#ffd6d6,#ff9a9a)"></i></div></div>
              <div class="bar"><div class="label">Happiness</div><div class="meter" id="happyMeter"><i style="width:70%;background:linear-gradient(90deg,#fff1a8,#ffd23f)"></i></div></div>
              <div class="bar"><div class="label">Energy</div><div class="meter" id="energyMeter"><i style="width:80%;background:linear-gradient(90deg,#c8f0ff,#9ad9ff)"></i></div></div>
              <div class="bar"><div class="label">Clean</div><div class="meter" id="cleanMeter"><i style="width:90%;background:linear-gradient(90deg,#dfffdc,#9ee0a1)"></i></div></div>
            </div>

            <div class="actions">
              <button class="btn btn-primary" id="feedBtn">Feed üçΩÔ∏è</button>
              <button class="btn btn-primary" id="playBtn">Play üéæ</button>
              <button class="btn btn-ghost" id="groomBtn">Groom ‚úÇÔ∏è</button>
              <button class="btn btn-ghost" id="sleepBtn">Nap üí§</button>
            </div>

            <div class="log" id="log">Welcome! Create your first cat and start caring for it üíñ</div>
          </div>

          <div style="width:220px;display:flex;flex-direction:column;gap:8px">
            <div style="background:linear-gradient(180deg,#fff,#fff);padding:10px;border-radius:12px">
              <div class="mini">Selected</div>
              <div style="font-weight:800" id="selName">‚Äî</div>
              <div class="mini">Level <span id="selLevel">0</span> ‚Ä¢ XP <span id="selXP">0</span></div>
            </div>

            <div style="background:linear-gradient(180deg,#fff,#fff);padding:10px;border-radius:12px">
              <div class="mini">Collection</div>
              <div id="collection" style="display:flex;gap:6px;flex-wrap:wrap;margin-top:6px"></div>
            </div>

            <div style="background:linear-gradient(180deg,#fff,#fff);padding:10px;border-radius:12px">
              <div class="mini">Badges</div>
              <div id="badges" style="display:flex;gap:6px;flex-wrap:wrap;margin-top:6px"></div>
            </div>

          </div>
        </div>

        <div class="footer">Auto-save every minute ‚Ä¢ Local only ‚Ä¢ No login required</div>
      </div>
    </div>
  </div>

<script>
// Cozy Cat Care ‚Äî single-file game
// Features: multiple cats, feed/play/groom/sleep actions, toy mini-game (click moving toy), XP & levels, daily streak, localStorage save

const LS_KEY = 'cozy_cat_care_v1';

// initial data
const DEFAULT_CATS = [
  {id: idGen(), name: 'Mochi', emoji: 'üò∫', hunger: 40, happy: 70, energy: 70, clean: 80, xp: 0, level:1, toys:[], badges:[]},
  {id: idGen(), name: 'Pudding', emoji: 'üò∏', hunger: 30, happy: 60, energy: 60, clean: 90, xp: 0, level:1, toys:[], badges:[]}
];

let store = {cats: [], selected: null, lastSaved: null, dailyStreak:0, lastVisit:null};

// UI
const catsListEl = document.getElementById('catsList');
const newCatBtn = document.getElementById('newCatBtn');
const petEmoji = document.getElementById('petEmoji');
const petWindow = document.getElementById('petWindow');
const toyEl = document.getElementById('toy');
const sparkles = document.getElementById('sparkles');
const feedBtn = document.getElementById('feedBtn');
const playBtn = document.getElementById('playBtn');
const groomBtn = document.getElementById('groomBtn');
const sleepBtn = document.getElementById('sleepBtn');
const logEl = document.getElementById('log');
const hungerMeter = document.getElementById('hungerMeter').firstElementChild;
const happyMeter = document.getElementById('happyMeter').firstElementChild;
const energyMeter = document.getElementById('energyMeter').firstElementChild;
const cleanMeter = document.getElementById('cleanMeter').firstElementChild;
const selName = document.getElementById('selName');
const selLevel = document.getElementById('selLevel');
const selXP = document.getElementById('selXP');
const collectionEl = document.getElementById('collection');
const badgesEl = document.getElementById('badges');
const dailyStreakEl = document.getElementById('dailyStreak');
const lastSavedEl = document.getElementById('lastSaved');

// helpers
function idGen(){ return Math.random().toString(36).slice(2,9); }
function clamp(v,a,b){ return Math.max(a, Math.min(b,v)); }
function fmtTime(ts){ return new Date(ts).toLocaleString(); }

// load/save
function load(){
  try{
    const raw = localStorage.getItem(LS_KEY);
    if(raw){ store = JSON.parse(raw); }
    if(!store.cats || store.cats.length===0){ store.cats = DEFAULT_CATS; store.selected = store.cats[0].id; }
  }catch(e){ console.error(e); store.cats = DEFAULT_CATS; store.selected = store.cats[0].id; }
  // daily streak logic
  const last = store.lastVisit ? new Date(store.lastVisit).toDateString() : null;
  const today = new Date().toDateString();
  if(!last) store.dailyStreak = 1; else {
    const diff = (new Date(today) - new Date(last)) / (1000*60*60*24);
    if(diff === 0) ; // same day keep streak
    else if(diff <= 1) store.dailyStreak = (store.dailyStreak||0) + 1;
    else store.dailyStreak = 1;
  }
  store.lastVisit = new Date().toString();
  dailyStreakEl.textContent = store.dailyStreak;
}

function save(){ store.lastSaved = Date.now(); localStorage.setItem(LS_KEY, JSON.stringify(store)); lastSavedEl.textContent = fmtTime(store.lastSaved); }

// UI rendering
function renderCatsList(){ catsListEl.innerHTML=''; store.cats.forEach(cat=>{
  const div = document.createElement('div'); div.className='cat-card'; if(store.selected===cat.id) div.classList.add('active');
  const pic = document.createElement('div'); pic.className='cat-pic'; pic.textContent = cat.emoji;
  const info = document.createElement('div'); info.innerHTML = `<div style='font-weight:700'>${cat.name}</div><div class='mini'>Lvl ${cat.level} ‚Ä¢ XP ${cat.xp}</div>`;
  div.appendChild(pic); div.appendChild(info);
  div.addEventListener('click', ()=>{ store.selected = cat.id; render(); });
  catsListEl.appendChild(div);
}); }

function getSelectedCat(){ return store.cats.find(c=>c.id===store.selected) || store.cats[0]; }

function render(){ renderCatsList(); const cat = getSelectedCat(); if(!cat) return;
  petEmoji.textContent = cat.emoji; selName.textContent = cat.name; selLevel.textContent = cat.level; selXP.textContent = cat.xp;
  hungerMeter.style.width = clamp(cat.hunger,0,100) + '%'; happyMeter.style.width = clamp(cat.happy,0,100) + '%'; energyMeter.style.width = clamp(cat.energy,0,100) + '%'; cleanMeter.style.width = clamp(cat.clean,0,100) + '%';
  // collection & badges
  collectionEl.innerHTML = ''; cat.toys.forEach(t=>{ const d=document.createElement('div'); d.textContent=t; d.style.padding='6px'; d.style.borderRadius='8px'; d.style.background='#fff3'; collectionEl.appendChild(d); });
  badgesEl.innerHTML = ''; cat.badges.forEach(b=>{ const d=document.createElement('div'); d.textContent=b; d.style.padding='6px'; d.style.borderRadius='8px'; d.style.background='#fff'; badgesEl.appendChild(d); });
}

// log
function addLog(s){ const d=document.createElement('div'); d.textContent = (new Date()).toLocaleTimeString() + ' ‚Ä¢ ' + s; logEl.prepend(d); }

// Actions
function feed(){ const cat = getSelectedCat(); cat.hunger = clamp(cat.hunger + 30, 0, 100); cat.happy = clamp(cat.happy + 8, 0, 100); cat.clean = clamp(cat.clean - 5, 0, 100); gainXP(cat,5); addLog(cat.name + ' ate some treats! üç™'); render(); save(); }

function groom(){ const cat = getSelectedCat(); cat.clean = clamp(cat.clean + 35, 0, 100); cat.happy = clamp(cat.happy + 6, 0, 100); gainXP(cat,6); addLog('You groomed ' + cat.name + ' ‚úÇÔ∏è'); render(); save(); }

function nap(){ const cat = getSelectedCat(); cat.energy = clamp(cat.energy + 40, 0, 100); cat.hunger = clamp(cat.hunger - 8, 0, 100); gainXP(cat,4); addLog(cat.name + ' took a cozy nap üí§'); render(); save(); }

function gainXP(cat, amt){ cat.xp += amt; // level up every 50 xp
  while(cat.xp >= 50){ cat.level += 1; cat.xp -= 50; cat.happy = clamp(cat.happy + 10,0,100); cat.energy = clamp(cat.energy + 10,0,100); cat.badges.push('Level '+cat.level); addLog(cat.name + ' leveled up to ' + cat.level + ' ‚≠ê'); }
}

// Play mini-game: click moving toy which appears in pet window for 8s
let toyTimer = null; let toyActive=false; let toyClicks=0;
function startPlay(){ const cat = getSelectedCat(); if(toyActive) return; toyActive = true; toyClicks = 0; toyEl.style.display = 'block'; animateToy(); addLog('Play time! Tap the toy üéæ'); const pop = setTimeout(()=>{ endPlay(); },8000); toyTimer = pop; }

function animateToy(){ if(!toyActive) return; const W = petWindow.clientWidth - 48; const H = petWindow.clientHeight - 48; const x = Math.floor(Math.random()*W); const y = Math.floor(Math.random()*H); toyEl.style.left = x + 'px'; toyEl.style.top = y + 'px'; // small wiggle
  if(toyActive) setTimeout(animateToy, 600);
}

toyEl.addEventListener('click', ()=>{ if(!toyActive) return; toyClicks++; const cat = getSelectedCat(); cat.happy = clamp(cat.happy + 6,0,100); cat.energy = clamp(cat.energy - 4,0,100); gainXP(cat,3); addLog(cat.name + ' bopped the toy! üêæ'); render(); if(toyClicks % 5 === 0){ // gift a toy
    const gift = ['üß∏','üéÄ','üêü','ü™∂'][Math.floor(Math.random()*4)]; cat.toys.push(gift); addLog(cat.name + ' found a toy: ' + gift); render(); }
});

function endPlay(){ toyActive = false; toyEl.style.display='none'; clearTimeout(toyTimer); addLog('Play ended'); save(); }

// add new cat
newCatBtn.addEventListener('click', ()=>{
  const name = prompt('Name your cat (or leave blank for a cute name)'); const emoji = prompt('Pick an emoji for your cat (e.g. üò∫ üò∏ üòª üê±)') || 'üò∫';
  const cat = {id:idGen(), name: name && name.trim() ? name.trim() : 'Kitty ' + Math.floor(Math.random()*99), emoji: emoji, hunger:50, happy:60, energy:70, clean:80, xp:0, level:1, toys:[], badges:[]};
  store.cats.push(cat); store.selected = cat.id; render(); save(); addLog('Welcome new cat: ' + cat.name + ' ' + cat.emoji);
});

// toy click attaches
playBtn.addEventListener('click', ()=>{ startPlay(); });
feedBtn.addEventListener('click', ()=>{ feed(); });
groomBtn.addEventListener('click', ()=>{ groom(); });
sleepBtn.addEventListener('click', ()=>{ nap(); });

// periodic upkeep: hunger increases, energy decreases, happiness drifts
setInterval(()=>{
  store.cats.forEach(cat=>{
    cat.hunger = clamp(cat.hunger - 2, 0, 100); // lower hunger means hungry? We'll treat 0-100 where higher = fuller; so decrease fullness
    // if very hungry (hunger<20) happiness drops
    if(cat.hunger < 25) cat.happy = clamp(cat.happy - 4, 0, 100);
    // energy slowly recovers if resting
    cat.energy = clamp(cat.energy - 1, 0, 100);
    // if very dirty => happiness drop
    if(cat.clean < 30) cat.happy = clamp(cat.happy - 2, 0, 100);
  });
  render(); save();
}, 60 * 1000); // every minute

// autosave every minute
setInterval(()=>{ save(); }, 60 * 1000);

// toy quick focus (touch-friendly)
petWindow.addEventListener('click', ()=>{ /* focus spot */ });

// small fun: click pet emoji to make it purr & sparkle
petEmoji.addEventListener('click', ()=>{ sparkles.style.opacity = 1; sparkles.style.transform = 'scale(1.1)'; setTimeout(()=>{ sparkles.style.opacity = 0.7; sparkles.style.transform = 'scale(1)'; },600); const cat = getSelectedCat(); cat.happy = clamp(cat.happy + 5,0,100); gainXP(cat,2); render(); save(); addLog(cat.name + ' purrs üò∫'); });

// save & load
load(); render(); save();

// expose simple cheat for testing: press C to add xp
window.addEventListener('keydown', (e)=>{ if(e.key.toLowerCase()==='c'){ const cat = getSelectedCat(); gainXP(cat,20); render(); save(); } if(e.key.toLowerCase()==='t'){ // toggle toy
  if(toyActive) endPlay(); else startPlay(); }});

</script>
</body>
</html>
